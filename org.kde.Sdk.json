{
    "build-runtime": true,
    "id": "org.kde.Sdk",
    "id-platform": "org.kde.Platform",
    "branch": "5.9",
    "runtime": "org.freedesktop.Platform",
    "sdk": "org.freedesktop.Sdk",
    "runtime-version": "1.6",
    "sdk-extensions": ["org.freedesktop.Sdk.Debug", "org.freedesktop.Sdk.Locale", "org.freedesktop.Sdk.Docs"],
    "platform-extensions": ["org.freedesktop.Platform.Locale"],
    "inherit-extensions": [
        "org.freedesktop.Platform.GL",
        "org.freedesktop.Platform.Timezones",
        "org.freedesktop.Platform.GStreamer",
        "org.freedesktop.Platform.Icontheme",
        "org.freedesktop.Sdk.Extension",
        "org.freedesktop.Platform.VAAPI.Intel"
    ],
    "add-extensions": {
        "org.kde.Sdk.Docs" : {
            "directory": "share/runtime/docs",
            "bundle": true,
            "autodelete": true,
            "no-autodownload": true
        }
    },
    "finish-args": [
        "--env=GI_TYPELIB_PATH=/app/lib/girepository-1.0",
        "--env=GST_PLUGIN_SYSTEM_PATH=/app/lib/gstreamer-1.0:/usr/lib/extensions/gstreamer-1.0:/usr/lib/gstreamer-1.0",
        "--env=XDG_DATA_DIRS=/app/share:/usr/share:/usr/share/runtime/share",
        "--env=QT_PLUGIN_PATH=/app/lib64/plugins:/app/lib/plugins:/usr/share/runtime/lib/plugins",
        "--env=QML2_IMPORT_PATH=/app/lib64/qml:/app/lib/qml",
        "--env=KDE_FORK_SLAVES=1",
        "--env=DCONF_USER_CONFIG_DIR=.config/dconf",
        "--filesystem=xdg-config/kdeglobals:ro",
        "--filesystem=xdg-run/dconf",
        "--filesystem=~/.config/dconf:ro",
        "--sdk=org.kde.Sdk//master",
        "--runtime=org.kde.Platform//master",
        "--extension=org.kde.KStyle=directory=share/runtime/lib/plugins/",
        "--extension=org.kde.KStyle=subdirectories=true",
        "--extension=org.kde.KStyle=no-autodownload=true",
        "--extension=org.kde.KStyle=version=master",
        "--extension=org.kde.KStyle=merge-dirs=styles",
        "--extension=org.kde.PlatformTheme=directory=share/runtime/lib/plugins/",
        "--extension=org.kde.PlatformTheme=subdirectories=true",
        "--extension=org.kde.PlatformTheme=no-autodownload=true",
        "--extension=org.kde.PlatformTheme=version=master",
        "--extension=org.kde.PlatformTheme=merge-dirs=platformthemes"

    ],
    "cleanup": [ "/cache",
                 "/man",
                 "/share/man",
                 "/lib/systemd",
                 "*.la"],
    "cleanup-commands": [ "touch -d @0 /usr/share/fonts",
                          "touch -d @0 /usr/share/fonts/*",
                          "fc-cache -fs"
                        ],
    "cleanup-platform": [ "/include",
                          "/share/aclocal",
                          "/share/pkgconfig",
                          "/lib/pkgconfig",
                          "*.a"
                        ],
    "cleanup-platform-commands": [ "touch -d @0 /usr/share/fonts",
                                   "touch -d @0 /usr/share/fonts/*",
                                   "fc-cache -fs",
                                   "ldconfig -C /usr/etc/ld.so.cache"
                                 ],
    "build-options" : {
        "cflags": "-O2 -g -fstack-protector-strong -D_FORTIFY_SOURCE=2",
        "cxxflags": "-O2 -g -fstack-protector-strong -D_FORTIFY_SOURCE=2",
        "ldflags": "-fstack-protector-strong -Wl,-z,relro,-z,now",
        "env": {
            "V": "1"
        }
    },
    "modules": [
        {
            "name": "os-release",
            "post-install": [
                "mkdir -p /usr/share/runtime/lib/plugins/"
            ],
            "sources": [
                {
                    "type": "file",
                    "path": "os-release"
                },
                {
                    "type": "file",
                    "path": "issue"
                },
                {
                    "type": "file",
                    "path": "issue.net"
                },
                {
                    "type": "file",
                    "path": "org.kde.Sdk.appdata.xml"
                },
                {
                    "type": "file",
                    "path": "org.kde.Platform.appdata.xml"
                },
                {
                    "type": "file",
                    "path": "os-release-configure",
                    "dest-filename": "configure"
                }
            ]
        }
    ]
}
